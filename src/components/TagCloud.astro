---
import { getCollection } from "astro:content";
const posts = await getCollection("blog");
const tagMap = new Map<string, number>();
for (const p of posts) for (const t of p.data.tags) tagMap.set(t, (tagMap.get(t) ?? 0) + 1);
const tags = [...tagMap.entries()].sort((a,b)=>b[1]-a[1]).slice(0,30);
---
<div class="rounded-2xl border p-4">
  <h3 class="font-semibold mb-3">태그</h3>
  <div class="flex flex-wrap gap-2 text-sm">
    {tags.map(([t, n]) => (
      <a href={`/tags/${encodeURIComponent(t)}`} class="px-2 py-1 rounded border hover:bg-gray-50">
        #{t} ({n})
      </a>
    ))}
  </div>
</div>
