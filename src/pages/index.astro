---
// src/pages/index.astro
import BaseLayout from '../layouts/BaseLayout.astro';
import { getAllPosts } from '../lib/posts';

const base = import.meta.env.BASE_URL;
const posts = getAllPosts();
---

<BaseLayout title="나만의 홈페이지">
  <main>
    {/* 여기 부분은 기존 인덱스 스타일을 따라 느낌만 맞춘 거야.
        마음에 안 들면 h1, p, section 쪽은 자유롭게 바꿔도 됨. */}

    <section>
      <h1>안녕하세요, K1MHJ입니다.</h1>
      <p>
        기타, 리코더, 음악이론, 프로그래밍, 로봇, 로그 분석 등
        제가 관심있는 것들을 기록하는 개인 페이지입니다.
      </p>
    </section>

    <section>
      <h2>최근 글</h2>
      {posts.length === 0 ? (
        <p>아직 작성된 글이 없습니다.</p>
      ) : (
        <ul>
          {posts.map((post) => (
            <li>
              <a href={`${base}posts/${post.slug}/`}>
                {post.title}
              </a>
              {post.createdAt && (
                <small style="margin-left: 0.5rem;">
                  {new Date(post.createdAt).toLocaleDateString('ko-KR')}
                </small>
              )}
              {post.summary && (
                <p>{post.summary}</p>
              )}
            </li>
          ))}
        </ul>
      )}
    </section>
  </main>
</BaseLayout>
