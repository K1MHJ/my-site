---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

const posts = await getCollection("blog");
const tagMap = new Map<string, number>();
for (const p of posts) for (const t of p.data.tags) tagMap.set(t, (tagMap.get(t) ?? 0) + 1);
const tags = [...tagMap.entries()].sort((a, b) => b[1] - a[1]);
---

<BaseLayout title="태그">
  <ul class="flex flex-wrap gap-3">
    {tags.map(([t, count]) => (
      <li><a class="px-3 py-1 border rounded" href={`/tags/${encodeURIComponent(t)}`}>{t} ({count})</a></li>
    ))}
  </ul>
</BaseLayout>
